.data
    arr: .space 1024     # Khai báo m?ng v?i ?? dài t?i ?a là 256 s? nguyên (m?i s? có kích th??c là 4 byte)
    comma: .asciiz ", "  # Chu?i phân cách gi?a các ph?n t? c?a m?ng

.text
main:
    # Nh?p giá tr? M t? bàn phím
    li $v0, 5        # L?nh s? d?ng ?? ??c giá tr? t? bàn phím (Code 5: ??c s? nguyên)
    syscall         # G?i l?nh h? th?ng ?? ??c giá tr? t? bàn phím
    move $s0, $v0   # L?u giá tr? M vào thanh ghi $s0

    # Nh?p giá tr? N t? bàn phím
    li $v0, 5        # L?nh s? d?ng ?? ??c giá tr? t? bàn phím (Code 5: ??c s? nguyên)
    syscall         # G?i l?nh h? th?ng ?? ??c giá tr? t? bàn phím
    move $s1, $v0   # L?u giá tr? N vào thanh ghi $s1

    # Nh?p s? ph?n t? c?a m?ng t? bàn phím
    li $v0, 5        # L?nh s? d?ng ?? ??c giá tr? t? bàn phím (Code 5: ??c s? nguyên)
    syscall         # G?i l?nh h? th?ng ?? ??c giá tr? t? bàn phím
    move $s2, $v0   # L?u s? ph?n t? c?a m?ng vào thanh ghi $s2

    # Nh?p các ph?n t? c?a m?ng t? bàn phím
    la $a0, arr     # ??a ??a ch? c?a m?ng vào thanh ghi $a0 ?? truy?n vào hàm ??c m?ng
    move $a1, $s2   # ??a s? ph?n t? c?a m?ng vào thanh ghi $a1 ?? truy?n vào hàm ??c m?ng
    jal read_array  # G?i hàm ??c m?ng

    # In ra các ph?n t? c?a m?ng n?m trong ?o?n (M, N)
    la $a0, arr      # ??a ??a ch? c?a m?ng vào thanh ghi $a0 ?? truy?n vào hàm in m?ng
    move $a1, $s2    # ??a s? ph?n t? c?a m?ng vào thanh ghi $a1 ?? truy?n vào hàm in m?ng
    move $a2, $s0    # ??a giá tr? M vào thanh ghi $a2 ?? truy?n vào hàm in m?ng
    move $a3, $s1    # ??a giá tr? N vào thanh ghi $a3 ?? truy?n vào hàm in m?ng
    jal print_array  # G?i hàm in m?ng

# Hàm in m?ng
print_array:
    li $v0, 1          # L?nh s? d?ng ?? in ra k?t qu? (Code 1: In s? nguyên)
    move $t0, $a0      # L?u ??a ch? c?a m?ng vào thanh ghi $t0
    li $t2, 0          # Kh?i t?o bi?n $t2 là giá tr? ??u tiên c?a m?ng
    li $t3, 0          # Kh?i t?o bi?n $t3 là s? l??ng ph?n t? ?ã in ra
    loop_print_array:
        beq $t3, $a1, end_print_array  # N?u ?ã in ra ?? s? l??ng ph?n t? c?n thi?t thì thoát kh?i vòng l?p
        lw $t1, ($t0)     # Load giá tr? c?a ph?n t? th? i vào thanh ghi $t1
        ble $t1, $a2, skip_print_array   # N?u ph?n t? bé h?n giá tr? M thì b? qua không in
        bgt $t1, $a3, skip_print_array   # N?u ph?n t? l?n h?n giá tr? N thì b? qua không in
        move $a0, $t1     # Gán giá tr? c?a ph?n t? ??n thanh ghi s? d?ng ?? in ra
        syscall          # G?i l?nh h? th?ng ?? in ra giá tr? c?a ph?n t?
        li $v0, 4         # L?nh s? d?ng ?? in ra k?t qu? (Code 4: In chu?i)
        la $a0, comma     # Load ??a ch? c?a chu?i "," vào thanh ghi $a0
        syscall          # G?i l?nh h? th?ng ?? in ra chu?i ","
        addi $t3, $t3, 1  # T?ng bi?n ??m s? l??ng ph?n t? ?ã in ra lên 1
        skip_print_array:
            addi $t0, $t0, 4      # T?ng con tr? c?a m?ng lên 4 byte ?? truy c?p ph?n t? ti?p theo
            j loop_print_array    # Quay l?i vòng l?p ?? ti?p t?c in các ph?n t? khác
    end_print_array:
        jr $ra             # Tr? v?

# Hàm nh?p m?ng
read_array:
    move $t0, $a0       # L?u ??a ch? c?a m?ng vào thanh ghi $t0
    li $t1, 0           # Kh?i t?o bi?n $t1 là s? l??ng ph?n t? ?ã nh?p
    loop_read_array:
        beq $t1, $a1, end_read_array   # N?u ?ã nh?p ?? s? l??ng ph?n t? c?n thi?t thì thoát kh?i vòng l?p
        li $v0, 5         # L?nh s? d?ng ?? ??c giá tr? t? bàn phím (Code 5: ??c s? nguyên)
        syscall          # G?i l?nh h? th?ng ?? ??c giá tr? t? bàn phím
        sw $v0, ($t0)     # L?u giá tr? v?a nh?p vào m?ng
        addi $t0, $t0, 4  # T?ng con tr? c?a m?ng lên 4 byte ?? truy c?p ph?n t? ti?p theo
        addi $t1, $t1, 1  # T?ng bi?n ??m s? l??ng ph?n t? ?ã nh?p lên 1
        j loop_read_array  # Quay l?i vòng l?p ?? ti?p t?c nh?p các ph?n t? khác
    end_read_array:
        jr $ra
    # K?t thúc ch??ng trình
    li $v0, 10       # L?nh s? d?ng ?? thoát ch??ng trình (Code 10: Thoát)
    syscall         # G?i l?nh h? th?ng ?? thoát ch??ng trình
